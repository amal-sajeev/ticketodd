<div class="slide" data-slide="3">
  <div class="slide-inner">
    <span class="tag tag-cyan animate a-d1">Process</span>
    <h2 class="animate a-d2">End-to-End Flow</h2>
    <svg class="anim-trigger" viewBox="0 0 1600 420" width="1600" height="420" style="max-width:100%;margin-top:8px">
      <defs>
        <linearGradient id="stepGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#1A73E8"/>
          <stop offset="100%" style="stop-color:#00BCD4"/>
        </linearGradient>
        <linearGradient id="stepGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#00BCD4"/>
          <stop offset="100%" style="stop-color:#7C4DFF"/>
        </linearGradient>
        <linearGradient id="stepGrad3" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#7C4DFF"/>
          <stop offset="100%" style="stop-color:#1A73E8"/>
        </linearGradient>
        <linearGradient id="stepGrad4" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#1E8E3E"/>
          <stop offset="100%" style="stop-color:#69f0ae"/>
        </linearGradient>
      </defs>
      <!-- Master trigger for stagger -->
      <animate id="flowMaster" attributeName="opacity" from="1" to="1" dur="0.01s" fill="freeze" begin="indefinite"/>
      <!-- Step 1 card -->
      <g opacity="0">
        <animate attributeName="opacity" from="0" to="1" dur="0.4s" fill="freeze" begin="flowMaster.begin+0.2s"/>
        <rect x="40" y="20" width="280" height="200" rx="16" fill="var(--surface-raised)" stroke="var(--border)" stroke-width="1"/>
        <circle cx="180" cy="55" r="22" fill="url(#stepGrad1)"/>
        <text x="180" y="61" text-anchor="middle" font-size="16" font-weight="700" fill="#fff">1</text>
        <text x="180" y="115" text-anchor="middle" font-family="'Material Symbols Outlined'" font-size="36" fill="var(--primary-light)">person</text>
        <text x="180" y="155" text-anchor="middle" font-size="18" font-weight="600" fill="var(--text-primary)">Citizen Files</text>
        <text x="180" y="185" text-anchor="middle" font-size="13" fill="var(--text-secondary)">Multilingual form, attachments, geolocation</text>
      </g>
      <!-- Arrow 1->2 -->
      <path d="M 320 120 L 400 120" stroke="var(--border)" stroke-width="2" stroke-dasharray="6 4" fill="none">
        <animate attributeName="stroke-dashoffset" from="100" to="0" dur="0.4s" fill="freeze" begin="flowMaster.begin+0.35s"/>
      </path>
      <circle r="3" fill="var(--primary)">
        <animateMotion dur="1s" repeatCount="indefinite" path="M 320 120 L 400 120" begin="flowMaster.begin+0.35s"/>
      </circle>
      <!-- Step 2 card -->
      <g opacity="0">
        <animate attributeName="opacity" from="0" to="1" dur="0.4s" fill="freeze" begin="flowMaster.begin+0.5s"/>
        <rect x="400" y="20" width="280" height="200" rx="16" fill="var(--surface-raised)" stroke="var(--border)" stroke-width="1"/>
        <circle cx="540" cy="55" r="22" fill="url(#stepGrad2)"/>
        <text x="540" y="61" text-anchor="middle" font-size="16" font-weight="700" fill="#fff">2</text>
        <text x="540" y="115" text-anchor="middle" font-family="'Material Symbols Outlined'" font-size="36" fill="var(--primary-light)">psychology</text>
        <text x="540" y="155" text-anchor="middle" font-size="18" font-weight="600" fill="var(--text-primary)">AI Classifies</text>
        <text x="540" y="185" text-anchor="middle" font-size="13" fill="var(--text-secondary)">Department, priority, sentiment, tier</text>
      </g>
      <!-- Step 2 output badges -->
      <g opacity="0">
        <animate attributeName="opacity" from="0" to="1" dur="0.3s" fill="freeze" begin="flowMaster.begin+0.9s"/>
        <rect x="440" y="235" width="60" height="28" rx="8" fill="rgba(26,115,232,.15)"/>
        <text x="470" y="253" text-anchor="middle" font-size="12" font-weight="600" fill="var(--primary-light)">Dept</text>
        <rect x="510" y="235" width="60" height="28" rx="8" fill="rgba(217,48,37,.12)"/>
        <text x="540" y="253" text-anchor="middle" font-size="12" font-weight="600" fill="#ef9a9a">Priority</text>
        <rect x="580" y="235" width="60" height="28" rx="8" fill="rgba(227,116,0,.12)"/>
        <text x="610" y="253" text-anchor="middle" font-size="12" font-weight="600" fill="#ffb74d">Sentiment</text>
        <rect x="650" y="235" width="60" height="28" rx="8" fill="rgba(124,77,255,.12)"/>
        <text x="680" y="253" text-anchor="middle" font-size="12" font-weight="600" fill="#b388ff">Tier</text>
      </g>
      <!-- Arrow 2->3 -->
      <path d="M 680 120 L 760 120" stroke="var(--border)" stroke-width="2" stroke-dasharray="6 4" fill="none">
        <animate attributeName="stroke-dashoffset" from="100" to="0" dur="0.4s" fill="freeze" begin="flowMaster.begin+0.65s"/>
      </path>
      <circle r="3" fill="var(--primary)">
        <animateMotion dur="1s" repeatCount="indefinite" path="M 680 120 L 760 120" begin="flowMaster.begin+0.65s"/>
      </circle>
      <!-- Step 3 card -->
      <g opacity="0">
        <animate attributeName="opacity" from="0" to="1" dur="0.4s" fill="freeze" begin="flowMaster.begin+0.8s"/>
        <rect x="760" y="20" width="280" height="200" rx="16" fill="var(--surface-raised)" stroke="var(--border)" stroke-width="1"/>
        <circle cx="900" cy="55" r="22" fill="url(#stepGrad3)"/>
        <text x="900" y="61" text-anchor="middle" font-size="16" font-weight="700" fill="#fff">3</text>
        <text x="900" y="115" text-anchor="middle" font-family="'Material Symbols Outlined'" font-size="36" fill="var(--primary-light)">badge</text>
        <text x="900" y="155" text-anchor="middle" font-size="18" font-weight="600" fill="var(--text-primary)">Officer Resolves</text>
        <text x="900" y="185" text-anchor="middle" font-size="13" fill="var(--text-secondary)">AI-drafted resolution, sub-tasks</text>
      </g>
      <!-- Arrow 3->4 -->
      <path d="M 1040 120 L 1120 120" stroke="var(--border)" stroke-width="2" stroke-dasharray="6 4" fill="none">
        <animate attributeName="stroke-dashoffset" from="100" to="0" dur="0.4s" fill="freeze" begin="flowMaster.begin+0.95s"/>
      </path>
      <circle r="3" fill="var(--primary)">
        <animateMotion dur="1s" repeatCount="indefinite" path="M 1040 120 L 1120 120" begin="flowMaster.begin+0.95s"/>
      </circle>
      <!-- Step 4 card -->
      <g opacity="0">
        <animate attributeName="opacity" from="0" to="1" dur="0.4s" fill="freeze" begin="flowMaster.begin+1.1s"/>
        <rect x="1120" y="20" width="280" height="200" rx="16" fill="var(--surface-raised)" stroke="var(--border)" stroke-width="1"/>
        <circle cx="1260" cy="55" r="22" fill="url(#stepGrad4)"/>
        <text x="1260" y="61" text-anchor="middle" font-size="16" font-weight="700" fill="#fff">4</text>
        <text x="1260" y="115" text-anchor="middle" font-family="'Material Symbols Outlined'" font-size="36" fill="#69f0ae">check_circle</text>
        <text x="1260" y="155" text-anchor="middle" font-size="18" font-weight="600" fill="var(--text-primary)">Citizen Confirms</text>
        <text x="1260" y="185" text-anchor="middle" font-size="13" fill="var(--text-secondary)">Feedback, self-resolution</text>
      </g>
    </svg>
  </div>
</div>
